$(document).ready(function(){var o=$("#yii2-snap-shoot-photo").attr("src");$("#yii2-snap-shoot-show").on("click",function(){$("#yii2-snap-shoot-photo").height($("#yii2-snap-shoot-video").height()),$("#yii2-snap-shoot-ok").attr("disabled","disabled"),$("#yii2-snap-shoot-video").attr("src",""),$("#yii2-snap-shoot-photo").attr("src",o),function(){document.getElementById("yii2-snap-shoot-video");var o=document.getElementById("yii2-snap-shoot-canvas"),e=o.getContext("2d"),a=document.getElementById("yii2-snap-shoot-photo");window.URL||window.webkitURL;navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia,navigator.getUserMedia?navigator.getUserMedia({audio:!1,video:{width:1280,height:720}},function(t){var i=document.querySelector("video");i.srcObject=t,i.onloadedmetadata=function(o){i.play()},$("#yii2-snap-shoot-capture").removeAttr("disabled"),$("#yii2-snap-shoot-error").hide(),$("#yii2-snap-shoot-capture").on("click",function(){e.drawImage(i,0,0,$("#yii2-snap-shoot-video").width(),$("#yii2-snap-shoot-video").height()),a.setAttribute("src",o.toDataURL("image/png")),$("#yii2-snap-shoot-ok").removeAttr("disabled")}),$("#yii2-snap-shoot-ok").on("click",function(o){o.preventDefault(),t.getTracks().forEach(function(o){o.stop()})}),$("#"+modalId).on("hide.bs.modal",function(o){t.getTracks().forEach(function(o){o.stop()})})},function(o){$("#yii2-snap-shoot-capture").attr("disabled","disabled"),$("#yii2-snap-shoot-error").show()}):console.log("getUserMedia not supported")}()})});